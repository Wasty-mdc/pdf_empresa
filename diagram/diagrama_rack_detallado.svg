<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<svg xmlns="http://www.w3.org/2000/svg" width="1600" height="900">
  <rect x="0" y="0" width="1600" height="900" fill="#ffffff"/>
  <text x="800" y="40" font-family="Arial, Helvetica, sans-serif" font-size="28" text-anchor="middle" fill="#2b2f77">
    Diagrama de bloques — ESA GV RACK KVR 6 SLIM (KVR.S006.R0061)
  </text>

  <!-- BLOQUE: ALIMENTACIÓN 24 V -->
  <rect x="40" y="90" width="360" height="210" rx="12" ry="12" fill="#e9ecef" stroke="#333333" stroke-width="1.5"/>
  <text x="60" y="115" font-family="Arial, Helvetica, sans-serif" font-size="16" fill="#2b2f77">Alimentación 24 VDC</text>

  <rect x="60" y="130" width="140" height="50" rx="8" ry="8" fill="#ffffff" stroke="#000000" stroke-width="1.2"/>
  <text x="130" y="160" font-family="Arial, Helvetica, sans-serif" font-size="13" text-anchor="middle" fill="#333333">Fusible + EMI</text>

  <rect x="220" y="130" width="160" height="50" rx="8" ry="8" fill="#ffffff" stroke="#000000" stroke-width="1.2"/>
  <text x="300" y="160" font-family="Arial, Helvetica, sans-serif" font-size="13" text-anchor="middle" fill="#333333">Protección polaridad</text>

  <line x1="200" y1="155" x2="220" y2="155" stroke="#333333" stroke-width="2"/>
  <defs>
    <marker id="arrow" markerWidth="10" markerHeight="7" refX="10" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#333333" />
    </marker>
  </defs>
  <line x1="380" y1="155" x2="420" y2="155" stroke="#333333" stroke-width="2" marker-end="url(#arrow)"/>

  <rect x="420" y="120" width="260" height="70" rx="8" ry="8" fill="#0b5cff" stroke="#000000" stroke-width="1.2"/>
  <text x="550" y="150" font-family="Arial, Helvetica, sans-serif" font-size="14" text-anchor="middle" fill="#ffffff">DC-DC 24V → 5V</text>

  <rect x="420" y="200" width="260" height="80" rx="8" ry="8" fill="#ffffff" stroke="#000000" stroke-width="1.2"/>
  <text x="550" y="225" font-family="Arial, Helvetica, sans-serif" font-size="13" text-anchor="middle" fill="#333333">Condensadores filtro</text>
  <text x="550" y="245" font-family="Arial, Helvetica, sans-serif" font-size="12" text-anchor="middle" fill="#333333">(electrolíticos + cerámicos)</text>

  <!-- DISTRIBUCIÓN 5V -->
  <line x1="680" y1="155" x2="740" y2="155" stroke="#333333" stroke-width="2" marker-end="url(#arrow)"/>
  <text x="710" y="145" font-family="Arial, Helvetica, sans-serif" font-size="12" text-anchor="middle" fill="#333333">5V</text>

  <!-- BLOQUE FPGA / LÓGICA -->
  <rect x="740" y="90" width="340" height="210" rx="12" ry="12" fill="#e9ecef" stroke="#333333" stroke-width="1.5"/>
  <text x="760" y="115" font-family="Arial, Helvetica, sans-serif" font-size="16" fill="#2b2f77">Control — FPGA / Lógica</text>

  <rect x="760" y="130" width="300" height="60" rx="8" ry="8" fill="#ffffff" stroke="#000000" stroke-width="1.2"/>
  <text x="910" y="160" font-family="Arial, Helvetica, sans-serif" font-size="13" text-anchor="middle" fill="#333333">Core lógico / Máquina de estados</text>

  <rect x="760" y="200" width="140" height="80" rx="8" ry="8" fill="#ffffff" stroke="#000000" stroke-width="1.2"/>
  <text x="830" y="235" font-family="Arial, Helvetica, sans-serif" font-size="13" text-anchor="middle" fill="#333333">Watchdog</text>

  <rect x="920" y="200" width="140" height="80" rx="8" ry="8" fill="#ffffff" stroke="#000000" stroke-width="1.2"/>
  <text x="990" y="225" font-family="Arial, Helvetica, sans-serif" font-size="13" text-anchor="middle" fill="#333333">Supervisión</text>
  <text x="990" y="245" font-family="Arial, Helvetica, sans-serif" font-size="12" text-anchor="middle" fill="#333333">errores/fallos</text>

  <!-- BLOQUE ENTRADAS DIGITALES -->
  <rect x="40" y="340" width="520" height="220" rx="12" ry="12" fill="#e9ecef" stroke="#333333" stroke-width="1.5"/>
  <text x="60" y="365" font-family="Arial, Helvetica, sans-serif" font-size="16" fill="#2b2f77">Entradas digitales (64 ch)</text>

  <rect x="60" y="380" width="160" height="60" rx="8" ry="8" fill="#ffffff" stroke="#000000" stroke-width="1.2"/>
  <text x="140" y="415" font-family="Arial, Helvetica, sans-serif" font-size="13" text-anchor="middle" fill="#333333">Optoacopladores</text>

  <rect x="240" y="380" width="160" height="60" rx="8" ry="8" fill="#ffffff" stroke="#000000" stroke-width="1.2"/>
  <text x="320" y="405" font-family="Arial, Helvetica, sans-serif" font-size="13" text-anchor="middle" fill="#333333">Filtros RC</text>
  <text x="320" y="425" font-family="Arial, Helvetica, sans-serif" font-size="12" text-anchor="middle" fill="#333333">anti-ruido</text>

  <rect x="420" y="380" width="120" height="60" rx="8" ry="8" fill="#ffffff" stroke="#000000" stroke-width="1.2"/>
  <text x="480" y="415" font-family="Arial, Helvetica, sans-serif" font-size="13" text-anchor="middle" fill="#333333">Buffers</text>

  <line x1="220" y1="410" x2="240" y2="410" stroke="#333333" stroke-width="2"/>
  <line x1="400" y1="410" x2="420" y2="410" stroke="#333333" stroke-width="2"/>
  <line x1="540" y1="410" x2="760" y2="410" stroke="#333333" stroke-width="2" marker-end="url(#arrow)"/>
  <text x="650" y="400" font-family="Arial, Helvetica, sans-serif" font-size="12" text-anchor="middle" fill="#333333">Señales a FPGA</text>

  <!-- BLOQUE SALIDAS DIGITALES -->
  <rect x="740" y="340" width="820" height="410" rx="12" ry="12" fill="#e9ecef" stroke="#333333" stroke-width="1.5"/>
  <text x="760" y="365" font-family="Arial, Helvetica, sans-serif" font-size="16" fill="#2b2f77">Salidas digitales (64 ch)</text>

  <rect x="760" y="380" width="200" height="70" rx="8" ry="8" fill="#ffffff" stroke="#000000" stroke-width="1.2"/>
  <text x="860" y="410" font-family="Arial, Helvetica, sans-serif" font-size="13" text-anchor="middle" fill="#333333">Señal de mando desde FPGA</text>
  <line x1="910" y1="450" x2="910" y2="520" stroke="#333333" stroke-width="2"/>

  <rect x="880" y="500" width="260" height="90" rx="8" ry="8" fill="#ffffff" stroke="#000000" stroke-width="1.2"/>
  <text x="1010" y="535" font-family="Arial, Helvetica, sans-serif" font-size="13" text-anchor="middle" fill="#333333">Arrays transistor / MOSFET / Darlington</text>

  <rect x="1180" y="500" width="180" height="90" rx="8" ry="8" fill="#ffffff" stroke="#000000" stroke-width="1.2"/>
  <text x="1270" y="525" font-family="Arial, Helvetica, sans-serif" font-size="13" text-anchor="middle" fill="#333333">Protecciones</text>
  <text x="1270" y="545" font-family="Arial, Helvetica, sans-serif" font-size="12" text-anchor="middle" fill="#333333">flyback, OC, térmica</text>

  <rect x="1380" y="500" width="160" height="90" rx="8" ry="8" fill="#2aa84a" stroke="#000000" stroke-width="1.2"/>
  <text x="1460" y="545" font-family="Arial, Helvetica, sans-serif" font-size="14" text-anchor="middle" fill="#ffffff">OUT1…OUT64</text>

  <!-- LÍNEAS ENTRE DRIVERS, PROTECCIONES Y OUTS -->
  <line x1="1140" y1="545" x2="1180" y2="545" stroke="#333333" stroke-width="2"/>
  <line x1="1360" y1="545" x2="1380" y2="545" stroke="#333333" stroke-width="2"/>

  <!-- DESTACAR OUT1/OUT2 EN ROJO -->
  <circle cx="1440" cy="620" r="8" fill="#d72638"/>
  <circle cx="1485" cy="620" r="8" fill="#d72638"/>
  <text x="1462" y="648" font-family="Arial, Helvetica, sans-serif" font-size="12" text-anchor="middle" fill="#d72638">OUT1 / OUT2 afectados</text>

  <!-- LÍNEAS 5V A MÓDULOS -->
  <line x1="680" y1="155" x2="860" y2="380" stroke="#333333" stroke-width="1.5"/>
  <line x1="680" y1="155" x2="300" y2="380" stroke="#333333" stroke-width="1.5"/>
  <text x="315" y="372" font-family="Arial, Helvetica, sans-serif" font-size="11" text-anchor="middle" fill="#333333">5V logic</text>
  <text x="875" y="372" font-family="Arial, Helvetica, sans-serif" font-size="11" text-anchor="middle" fill="#333333">5V drivers</text>

  <!-- PUNTOS DE MEDIDA -->
  <circle cx="680" cy="155" r="6" fill="#4a00e0" stroke="#000000" stroke-width="1"/>
  <text x="705" y="160" font-family="Arial, Helvetica, sans-serif" font-size="12" fill="#333333">TP1: 5V (rizado)</text>

  <circle cx="940" cy="545" r="6" fill="#4a00e0" stroke="#000000" stroke-width="1"/>
  <text x="965" y="550" font-family="Arial, Helvetica, sans-serif" font-size="12" fill="#333333">TP2: Salidas driver</text>

  <circle cx="1460" cy="545" r="6" fill="#4a00e0" stroke="#000000" stroke-width="1"/>
  <text x="1490" y="550" font-family="Arial, Helvetica, sans-serif" font-size="12" fill="#333333">TP3: OUT ch</text>

  <!-- LEYENDA -->
  <rect x="40" y="590" width="520" height="160" rx="12" ry="12" fill="#ffffff" stroke="#333333" stroke-width="1.2"/>
  <text x="60" y="615" font-family="Arial, Helvetica, sans-serif" font-size="15" fill="#2b2f77">Leyenda</text>
  <rect x="60" y="630" width="18" height="12" fill="#e9ecef" stroke="#333333" stroke-width="1"/>
  <text x="86" y="640" font-family="Arial, Helvetica, sans-serif" font-size="12" fill="#333333">Bloque funcional</text>
  <rect x="60" y="650" width="18" height="12" fill="#0b5cff" stroke="#333333" stroke-width="1"/>
  <text x="86" y="660" font-family="Arial, Helvetica, sans-serif" font-size="12" fill="#333333">Regulación / potencia</text>
  <rect x="60" y="670" width="18" height="12" fill="#2aa84a" stroke="#333333" stroke-width="1"/>
  <text x="86" y="680" font-family="Arial, Helvetica, sans-serif" font-size="12" fill="#333333">Salidas</text>
  <circle cx="69" cy="695" r="6" fill="#4a00e0" stroke="#000000" stroke-width="1"/>
  <text x="86" y="700" font-family="Arial, Helvetica, sans-serif" font-size="12" fill="#333333">Puntos de medida (TP)</text>
  <circle cx="69" cy="720" r="6" fill="#d72638" stroke="#000000" stroke-width="1"/>
  <text x="86" y="725" font-family="Arial, Helvetica, sans-serif" font-size="12" fill="#333333">Canales con fallo</text>
</svg>
